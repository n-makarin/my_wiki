# Ownership

## Table of Contents

- [Ownership](#ownership)
  - [Table of Contents](#table-of-contents)
  - [Main rules](#main-rules)
  - [The Stack and the Heap](#the-stack-and-the-heap)
  - [Variable Scope](#variable-scope)
  - [The String Type](#the-string-type)
  - [Memory and Allocation](#memory-and-allocation)
  - [Move](#move)

## Main rules

- Each value in Rust has a variable that’s called its owner.
- There can only be one owner at a time.
- When the owner goes out of scope, the value will be dropped.

## The Stack and the Heap

All simple values with a known fixed values are pushed onto the stack.

All sdk and created types are pushed onto the heap.

## Variable Scope

A scope is the range within a program for which an item is valid.

## The String Type

```rust
fn main() {
    let mut s = String::from("hello");

    s.push_str(", world!");

    println!("{}", s); // This will print `hello, world!`
}
```

## Memory and Allocation

- The memory must be requested from the memory allocator at runtime.

  Starts when we call String::from
  
- We need a way of returning this memory to the allocator when we’re done with our String.

**allocate** - allocate memory

**free** - free memory

**drop** - it’s where the author of String can put the code to return the memory. Rust calls drop automatically at the closing curly bracket.

## Move

Representation in memory of a String holding the value "hello" bound to s1.

```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = s1;
}
```

![signed](/img/prog/lang/rust/string_in_heap.svg =375x)
